<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.pro.myrp.persistence.hr.HRDAO">
 
 	<!-- 인사코드 그룹 목록보기 -->
 	<select id="select_hr_code_groups" resultType="Hr_code_groupVO">
 		<![CDATA[
 		SELECT	*
 		FROM	hr_code_group
 		]]>
 	</select>
 	
 	<!-- 인사코드 그룹번호로 인사코드 그룹 검색 -->
 	<select id="select_hr_code_group" parameterType="int"
 	resultType="Hr_code_groupVO">
 		<![CDATA[
 		SELECT	*
 		FROM	hr_code_group
 		WHERE	hr_code_group_id = #{hr_code_group_id}
 		]]>
 	</select>
 	
 	<!-- 인사코드 그룹 등록 -->
 	<insert id="insert_base_code_group" parameterType="Hr_code_groupVO">
 		<![CDATA[
 		INSERT INTO hr_code_group(hr_code_group_id,hr_code_group_name,use_state)
 		VALUES(#{hr_code_group_id},#{hr_code_group_name},#{use_state})
 		]]>
 	</insert>

	<!-- 선택된 그룹의 인사코드 목록보기 -->
	<select id="select_hr_codes" parameterType="int"
	resultType="Hr_codeVO">
	<![CDATA[
	SELECT	*
	FROM	hr_code
	WHERE	hr_code_group_id = #{hr_code_group_id}
	]]>
	</select>

	<!-- 인사코드 그룹 사용미사용 수정 -->
	<update id="update_hr_code_group" parameterType="java.util.Map">
		<![CDATA[
		UPDATE	hr_code_group
		SET		use_state = #{use_state}
		WHERE	hr_code_group_id = #{hr_code_group_id}
		]]>
	</update>
	
	<!-- 선택된 번호의 인사코드 정보 검색 -->
	<select id="select_hr_code" parameterType="int"
	resultType="Hr_codeVO">
		<![CDATA[
		SELECT	*
		FROM	hr_code
		WHERE	hr_code_group_id = #{hr_code_group_id}
		AND		hr_code_id = #{hr_code_id}
		]]>
	</select>
	
	<!-- 인사코드 등록 -->
	<insert id="insert_base_code" parameterType="Hr_codeVO">
		<![CDATA[
		INSERT INTO	hr_code(hr_code_group_id,hr_code_id,hr_code_name,use_state)
		VALUES(#{hr_code_group_id},#{hr_code_id},#{hr_code_name},#{use_state})
		]]>
	</insert>

	<!-- 인사코드 수정 -->
	<update id="update_hr_code" parameterType="Hr_codeVO">
		<![CDATA[
		UPDATE	hr_code
		SET		hr_code_name = #{hr_code_name},
				use_state = #{use_state}
		WHERE	hr_code_group_id = #{hr_code_group_id}
		AND		hr_code_id = #{hr_code_id}
		]]>
	</update>

	<!-- 부서의 총 개수 -->
	<select id="select_dept_cnt" resultType="int">
		<![CDATA[
		SELECT	COUNT(*)
		FROM	department
		]]>
	</select>

	<!-- 부서 목록 보기 -->
	<select id="select_dept_list" parameterType="java.util.Map"
	resultType="DeptVO">
		<![CDATA[
		SELECT  *
		FROM    (SELECT dept_id, dept_name, access_role, use_state,
				rownum rNum
		        FROM    (SELECT *
		                FROM    department
		                ORDER BY dept_id
		                )
		        )
		WHERE rNum >= #{start} AND rNum <= #{end}
		]]>
	</select>

	<!-- 부서번호로 부서 정보 검색 -->
	<select id="select_dept" parameterType="int"
	resultType="DeptVO">
		<![CDATA[
		SELECT	*
		FROM	department
		WHERE	dept_id = #{dept_id}
		]]>
	</select>
	
	<!-- 부서 등록 -->
	<insert id="insert_dept" parameterType="DeptVO">
		<![CDATA[
		INSERT INTO	department(dept_id,dept_name,access_role,use_state)
		VALUES (#{dept_id},#{dept_name},#{access_role},#{use_state})
		]]>
	</insert>

	<!-- 부서 정보 수정 -->
	<update id="update_dept" parameterType="DeptVO">
		<![CDATA[
		UPDATE	department
		SET		dept_name = #{dept_name},
				access_role = #{access_role},
				use_state = #{use_state}
		WHERE	dept_id = #{dept_id}
		]]>
	</update>
</mapper>
